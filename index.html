<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>US100 Tracker</title>
<style>
:root{--bg:#0a0e27;--card:#151932;--primary:#6366f1;--primary-dark:#4f46e5;--success:#10b981;--danger:#ef4444;--warning:#f59e0b;--text:#e2e8f0;--text-dim:#94a3b8;--border:#1e293b}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);-webkit-overflow-scrolling:touch;padding:env(safe-area-inset-top) 15px env(safe-area-inset-bottom)}
input,select,textarea,button{font-size:16px!important}
.header{background:#1e293b;padding:15px;border-bottom:2px solid var(--primary);margin:0 -15px 20px}
.logo{font-size:24px;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--success));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav{display:flex;gap:8px;margin:0 -15px 20px;padding:8px 15px;background:var(--card);overflow-x:auto}
.nav button{padding:12px 20px;border:none;background:transparent;color:var(--text-dim);border-radius:8px;font-weight:700;white-space:nowrap;min-height:44px}
.nav button.active{background:var(--primary);color:white}
.focus{background:var(--card);border-radius:12px;padding:20px;margin-bottom:20px;border:2px solid var(--primary)}
.focus-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}
.focus-card{background:var(--bg);padding:15px;border-radius:8px;border:2px solid var(--border)}
.focus-label{font-size:11px;color:var(--text-dim);margin-bottom:5px;font-weight:700;text-transform:uppercase}
.focus-value{font-size:28px;font-weight:800}
.focus-value.success{color:var(--success)}
.focus-value.danger{color:var(--danger)}
.focus-hint{font-size:11px;color:var(--text-dim);margin-top:5px}
.section{background:var(--card);border-radius:12px;padding:20px;margin-bottom:20px;border:2px solid var(--border)}
.section h2{font-size:18px;margin-bottom:15px;color:var(--primary)}
.check-item{background:var(--bg);padding:15px;border-radius:8px;display:flex;align-items:center;gap:10px;margin-bottom:10px;border:2px solid var(--border);min-height:56px}
.check-item.checked{background:rgba(16,185,129,0.15);border-color:var(--success)}
.check-item input{width:24px;height:24px;accent-color:var(--success)}
.check-item label{flex:1;font-weight:600}
.input-group{margin-bottom:15px}
.input-group label{display:block;font-size:13px;font-weight:700;color:var(--text-dim);margin-bottom:5px;text-transform:uppercase}
.input-group input,.input-group select{width:100%;background:var(--bg);border:2px solid var(--border);color:var(--text);padding:14px;border-radius:8px;font-weight:600}
.dial-container{display:flex;gap:8px;align-items:center}
.dial-btn{background:var(--primary);border:none;color:white;width:44px;height:50px;border-radius:8px;font-size:18px;font-weight:800;flex-shrink:0}
.dial-btn:active{transform:scale(0.92);background:var(--primary-dark)}
.dial-container input{flex:1;text-align:center;font-size:18px;font-weight:800}
.calc{background:rgba(99,102,241,0.15);padding:20px;border-radius:8px;margin:15px 0;border:2px solid var(--primary)}
.calc-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}
.calc-item{text-align:center}
.calc-label{font-size:10px;color:var(--text-dim);margin-bottom:5px;font-weight:700}
.calc-value{font-size:24px;font-weight:800}
.calc-value.good{color:var(--success)}
.calc-value.bad{color:var(--danger)}
.btn{width:100%;padding:16px;border:none;border-radius:10px;font-weight:700;font-size:16px;text-transform:uppercase;min-height:54px}
.btn-save{background:var(--success);color:white;margin-bottom:10px}
.btn-cancel{background:var(--card);color:var(--text);border:2px solid var(--border)}
.multi{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
.multi-item{background:var(--bg);border:2px solid var(--border);padding:10px 16px;border-radius:20px;font-size:13px;font-weight:600;min-height:40px}
.multi-item.selected{background:var(--primary);border-color:var(--primary);color:white}
.multi-item.error.selected{background:var(--danger);border-color:var(--danger)}
.hidden{display:none!important}
.trade-card{background:var(--card);padding:20px;border-radius:12px;border:2px solid var(--border);margin-bottom:15px}
.trade-card.profit{border-left:4px solid var(--success)}
.trade-card.loss{border-left:4px solid var(--danger)}
.trade-header{display:flex;justify-content:space-between;margin-bottom:15px}
.trade-result{font-size:28px;font-weight:800}
.trade-result.profit{color:var(--success)}
.trade-result.loss{color:var(--danger)}
.delete-btn{background:rgba(239,68,68,0.2);border:none;color:var(--danger);padding:10px;border-radius:8px;font-size:18px;min-width:44px;min-height:44px}
.trade-details{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;background:var(--bg);padding:15px;border-radius:8px;margin-bottom:10px}
.detail-label{font-size:10px;color:var(--text-dim);font-weight:700}
.detail-value{font-size:16px;font-weight:700}
.tag{display:inline-block;padding:5px 12px;background:rgba(99,102,241,0.2);color:var(--primary);border-radius:15px;font-size:11px;font-weight:700;margin:3px}
.tag.killzone{background:rgba(16,185,129,0.2);color:var(--success)}
.tag.error{background:rgba(239,68,68,0.2);color:var(--danger)}
</style>
</head>
<body>
<div class="header"><div class="logo">‚ö° US100 TRACKER</div></div>

<div class="focus"><div class="focus-grid">
<div class="focus-card"><div class="focus-label">Heute</div><div class="focus-value success" id="today-pnl">+0</div><div class="focus-hint">Pips</div></div>
<div class="focus-card"><div class="focus-label">Streak</div><div class="focus-value" id="win-streak">0</div><div class="focus-hint">Wins</div></div>
<div class="focus-card"><div class="focus-label">Setup</div><div class="focus-value" id="setup-quality">0%</div><div class="focus-hint">Qualit√§t</div></div>
<div class="focus-card"><div class="focus-label">√ò Trade</div><div class="focus-value" id="avg-per-trade">0</div><div class="focus-hint">Pips</div></div>
</div></div>

<div class="nav">
<button class="active" onclick="changeView('entry')" id="btn-entry">üìù Trade</button>
<button onclick="changeView('history')" id="btn-history">üìã Historie</button>
<button onclick="changeView('stats')" id="btn-stats">üìä Stats</button>
</div>

<div id="view-entry">
<div class="section"><h2>‚úÖ Setup Checkliste</h2>
<div class="check-item" onclick="toggleCheck('liquidityGrab')"><input type="checkbox" id="check-liquidityGrab"><label>Liquidity Grab</label></div>
<div class="check-item" onclick="toggleCheck('firstImpulse')"><input type="checkbox" id="check-firstImpulse"><label>First Impulse</label></div>
<div class="check-item" onclick="toggleCheck('secondImpulse')"><input type="checkbox" id="check-secondImpulse"><label>Second Impulse</label></div>
<div class="check-item" onclick="toggleCheck('pullback')"><input type="checkbox" id="check-pullback"><label>Pullback</label></div>
<div class="check-item" onclick="toggleCheck('killzoneLow')"><input type="checkbox" id="check-killzoneLow"><label>Killzone Low</label></div>
<div class="check-item" onclick="toggleCheck('setupComplete')"><input type="checkbox" id="check-setupComplete"><label>Setup 100%</label></div>
</div>

<div class="section"><h2>üíº Trade Details</h2>
<div class="input-group"><label>üìÖ Datum</label><input type="date" id="trade-date" onchange="updateWeekday()"></div>
<div class="input-group"><label>üìÜ Wochentag</label><select id="trade-weekday"><option>Montag</option><option>Dienstag</option><option>Mittwoch</option><option>Donnerstag</option><option>Freitag</option></select></div>
<div class="input-group"><label>üè∑Ô∏è Session</label><select id="trade-session"><option>Asian</option><option>London</option><option>New York</option><option>Overlap</option></select></div>
<div class="input-group"><label>üìä Fibo</label><select id="trade-fibo"><option>0.23</option><option>0.38</option><option>0.61</option><option>0.78</option></select></div>

<div class="input-group"><label>üéØ Entry</label>
<div class="dial-container">
<button class="dial-btn" onclick="adjust('trade-entry',-10)">--</button>
<button class="dial-btn" onclick="adjust('trade-entry',-1)">-</button>
<input type="number" id="trade-entry" value="25300.5" oninput="calc()">
<button class="dial-btn" onclick="adjust('trade-entry',1)">+</button>
<button class="dial-btn" onclick="adjust('trade-entry',10)">++</button>
</div></div>

<div class="input-group"><label>üõë Stop Loss</label>
<div class="dial-container">
<button class="dial-btn" onclick="adjust('trade-sl',-10)">--</button>
<button class="dial-btn" onclick="adjust('trade-sl',-1)">-</button>
<input type="number" id="trade-sl" value="25250.5" oninput="calc()">
<button class="dial-btn" onclick="adjust('trade-sl',1)">+</button>
<button class="dial-btn" onclick="adjust('trade-sl',10)">++</button>
</div></div>

<div class="input-group"><label>‚úÖ Take Profit</label>
<div class="dial-container">
<button class="dial-btn" onclick="adjust('trade-tp',-10)">--</button>
<button class="dial-btn" onclick="adjust('trade-tp',-1)">-</button>
<input type="number" id="trade-tp" value="25350.5" oninput="calc()">
<button class="dial-btn" onclick="adjust('trade-tp',1)">+</button>
<button class="dial-btn" onclick="adjust('trade-tp',10)">++</button>
</div></div>

<div class="input-group"><label>üí∞ Lot</label>
<div class="dial-container">
<button class="dial-btn" onclick="adjust('trade-lot',-0.5)">--</button>
<button class="dial-btn" onclick="adjust('trade-lot',-0.1)">-</button>
<input type="number" id="trade-lot" value="2.0" oninput="calc()">
<button class="dial-btn" onclick="adjust('trade-lot',0.1)">+</button>
<button class="dial-btn" onclick="adjust('trade-lot',0.5)">++</button>
</div></div>

<div class="input-group"><label>üé® Pattern</label><div class="multi">
<div class="multi-item" onclick="toggleMulti(this)">Double Top</div>
<div class="multi-item" onclick="toggleMulti(this)">Double Bottom</div>
<div class="multi-item" onclick="toggleMulti(this)">Breakout</div>
<div class="multi-item" onclick="toggleMulti(this)">Reversal</div>
</div></div>

<div class="input-group"><label>‚ö†Ô∏è Fehler</label><div class="multi">
<div class="multi-item error" onclick="toggleMulti(this)">FOMO</div>
<div class="multi-item error" onclick="toggleMulti(this)">Revenge</div>
<div class="multi-item error" onclick="toggleMulti(this)">Overtrading</div>
<div class="multi-item error" onclick="toggleMulti(this)">Emotional</div>
</div></div>

<div class="input-group"><label>üìù Notizen</label><textarea id="trade-notes" style="width:100%;min-height:80px;background:var(--bg);border:2px solid var(--border);color:var(--text);padding:14px;border-radius:8px;font-family:inherit;font-size:16px"></textarea></div>

<div class="calc"><div class="calc-grid">
<div class="calc-item"><div class="calc-label">Risk</div><div class="calc-value" id="calc-risk">0</div></div>
<div class="calc-item"><div class="calc-label">Reward</div><div class="calc-value" id="calc-reward">0</div></div>
<div class="calc-item"><div class="calc-label">R:R</div><div class="calc-value good" id="calc-rr">0:0</div></div>
<div class="calc-item"><div class="calc-label">USD</div><div class="calc-value" id="calc-dollar">$0</div></div>
</div></div>

<button class="btn btn-save" onclick="save()">üíæ TRADE SPEICHERN</button>
<button class="btn btn-cancel" onclick="reset()">üîÑ ZUR√úCKSETZEN</button>
</div>
</div>

<div id="view-history" class="hidden"><div id="trade-list"></div></div>

<div id="view-stats" class="hidden">
<div class="section"><h2>üìä Statistiken</h2>
<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px">
<div><div class="detail-label">Gesamt</div><div class="detail-value" id="stat-total">0</div></div>
<div><div class="detail-label">Win Rate</div><div class="detail-value" id="stat-winrate">0%</div></div>
<div><div class="detail-label">P&L</div><div class="detail-value" id="stat-pnl">0</div></div>
<div><div class="detail-label">√ò Trade</div><div class="detail-value" id="stat-avg">0</div></div>
<div><div class="detail-label">Bester</div><div class="detail-value" id="stat-best">0</div></div>
<div><div class="detail-label">Schlechtester</div><div class="detail-value" id="stat-worst">0</div></div>
</div></div>
</div>

<script>
let trades=[];let view='entry';

function changeView(v){view=v;document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));document.getElementById('btn-'+v).classList.add('active');document.getElementById('view-entry').classList.add('hidden');document.getElementById('view-history').classList.add('hidden');document.getElementById('view-stats').classList.add('hidden');document.getElementById('view-'+v).classList.remove('hidden');if(v==='history')renderHistory();if(v==='stats')renderStats();}

function load(){const s=localStorage.getItem('us100');if(s)trades=JSON.parse(s);updateFocus();}

function updateFocus(){const today=new Date().toISOString().split('T')[0];const todayTrades=trades.filter(t=>t.date===today);const todayPips=todayTrades.reduce((sum,t)=>sum+(t.tp-t.sl),0);document.getElementById('today-pnl').textContent=(todayPips>=0?'+':'')+todayPips;document.getElementById('today-pnl').className='focus-value '+(todayPips>=0?'success':'danger');let streak=0;for(let i=trades.length-1;i>=0;i--){if(trades[i].tp-trades[i].sl>0)streak++;else break;}document.getElementById('win-streak').textContent=streak;let complete=0;trades.forEach(t=>{if(!t.setup)return;let c=0;Object.values(t.setup).forEach(v=>{if(v)c++;});if(c===6)complete++;});const q=trades.length>0?((complete/trades.length)*100).toFixed(0):0;document.getElementById('setup-quality').textContent=q+'%';const avg=trades.length>0?(trades.reduce((sum,t)=>sum+(t.tp-t.sl),0)/trades.length).toFixed(1):0;document.getElementById('avg-per-trade').textContent=(avg>=0?'+':'')+avg;document.getElementById('avg-per-trade').className='focus-value '+(avg>=0?'success':'danger');}

function toggleCheck(id){const cb=document.getElementById('check-'+id);const item=cb.parentElement;cb.checked=!cb.checked;item.classList.toggle('checked',cb.checked);}

function toggleMulti(el){el.classList.toggle('selected');}

function adjust(id,amt){const field=document.getElementById(id);let val=parseFloat(field.value)||0;val+=amt;if(id==='trade-lot')val=Math.max(0.1,val);field.value=(Math.round(val*10)/10).toFixed(1);calc();if(navigator.vibrate)navigator.vibrate(10);}

function calc(){const entry=parseFloat(document.getElementById('trade-entry').value)||0;const sl=parseFloat(document.getElementById('trade-sl').value)||0;const tp=parseFloat(document.getElementById('trade-tp').value)||0;const lot=parseFloat(document.getElementById('trade-lot').value)||0;const risk=Math.abs(entry-sl);const reward=Math.abs(tp-entry);const rr=risk>0?(reward/risk):0;document.getElementById('calc-risk').textContent=risk.toFixed(1);document.getElementById('calc-reward').textContent=reward.toFixed(1);document.getElementById('calc-rr').textContent=rr>0?'1:'+(Math.round(rr*10)/10).toFixed(1):'0:0';document.getElementById('calc-rr').className='calc-value '+(rr>=2?'good':'bad');document.getElementById('calc-dollar').textContent='$'+((tp-sl)*lot).toFixed(2);}

function updateWeekday(){const d=new Date(document.getElementById('trade-date').value);const days=['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'];document.getElementById('trade-weekday').value=days[d.getDay()];}

function save(){const date=document.getElementById('trade-date').value;const entry=parseFloat(document.getElementById('trade-entry').value);const sl=parseFloat(document.getElementById('trade-sl').value);const tp=parseFloat(document.getElementById('trade-tp').value);const lot=parseFloat(document.getElementById('trade-lot').value);if(!date||!entry||!sl||!tp||!lot){alert('Bitte alle Felder ausf√ºllen!');return;}const setup={liquidityGrab:document.getElementById('check-liquidityGrab').checked,firstImpulse:document.getElementById('check-firstImpulse').checked,secondImpulse:document.getElementById('check-secondImpulse').checked,pullback:document.getElementById('check-pullback').checked,killzoneLow:document.getElementById('check-killzoneLow').checked,setupComplete:document.getElementById('check-setupComplete').checked};const patterns=Array.from(document.querySelectorAll('.multi-item:not(.error).selected')).map(el=>el.textContent.trim());const errors=Array.from(document.querySelectorAll('.multi-item.error.selected')).map(el=>el.textContent.trim());trades.push({date,entry,sl,tp,lot,notes:document.getElementById('trade-notes').value,fibo:document.getElementById('trade-fibo').value,session:document.getElementById('trade-session').value,weekday:document.getElementById('trade-weekday').value,patterns,errors,setup});localStorage.setItem('us100',JSON.stringify(trades));reset();updateFocus();alert('Trade gespeichert!');}

function reset(){document.getElementById('trade-date').value=new Date().toISOString().split('T')[0];updateWeekday();document.getElementById('trade-entry').value='25300.5';document.getElementById('trade-sl').value='25250.5';document.getElementById('trade-tp').value='25350.5';document.getElementById('trade-lot').value='2.0';document.getElementById('trade-notes').value='';document.querySelectorAll('.check-item').forEach(item=>{item.classList.remove('checked');item.querySelector('input').checked=false;});document.querySelectorAll('.multi-item').forEach(item=>item.classList.remove('selected'));calc();}

function renderHistory(){const el=document.getElementById('trade-list');if(trades.length===0){el.innerHTML='<div class="section" style="text-align:center;padding:40px"><h3>Noch keine Trades</h3></div>';return;}let html='';trades.slice().reverse().forEach((t,idx)=>{const pips=t.tp-t.sl;const realIdx=trades.length-1-idx;html+='<div class="trade-card '+(pips>=0?'profit':'loss')+'"><div class="trade-header"><div><div style="color:var(--text-dim);font-size:12px;margin-bottom:5px">'+t.session+' | '+t.weekday+' | '+new Date(t.date).toLocaleDateString('de-DE')+'</div><div class="trade-result '+(pips>=0?'profit':'loss')+'">'+(pips>=0?'+':'')+pips+' Pips</div></div><button class="delete-btn" onclick="deleteTrade('+realIdx+')">√ó</button></div><div class="trade-details"><div><div class="detail-label">Entry</div><div class="detail-value">'+t.entry+'</div></div><div><div class="detail-label">SL</div><div class="detail-value">'+t.sl+'</div></div><div><div class="detail-label">TP</div><div class="detail-value">'+t.tp+'</div></div><div><div class="detail-label">Lot</div><div class="detail-value">'+t.lot+'</div></div></div>';if(t.notes)html+='<div style="padding:10px;background:rgba(245,158,11,0.1);border-radius:6px;margin:10px 0;font-size:13px;border-left:3px solid var(--warning)">'+t.notes+'</div>';html+='<div>';if(t.setup.liquidityGrab)html+='<span class="tag">‚úì Liquidity</span>';if(t.setup.firstImpulse)html+='<span class="tag">‚úì 1st Impulse</span>';if(t.setup.killzoneLow)html+='<span class="tag killzone">‚úì Killzone</span>';if(t.patterns)t.patterns.forEach(p=>html+='<span class="tag">'+p+'</span>');if(t.errors)t.errors.forEach(e=>html+='<span class="tag error">'+e+'</span>');html+='</div></div>';});el.innerHTML=html;}

function deleteTrade(idx){if(confirm('Trade l√∂schen?')){trades.splice(idx,1);localStorage.setItem('us100',JSON.stringify(trades));updateFocus();renderHistory();}}

function renderStats(){const total=trades.length;const wins=trades.filter(t=>t.tp-t.sl>0).length;const totalPips=trades.reduce((sum,t)=>sum+(t.tp-t.sl),0);const winRate=total>0?((wins/total)*100).toFixed(1):0;const avgPips=total>0?(totalPips/total).toFixed(1):0;const best=trades.length>0?Math.max(...trades.map(t=>t.tp-t.sl)):0;const worst=trades.length>0?Math.min(...trades.map(t=>t.tp-t.sl)):0;document.getElementById('stat-total').textContent=total;document.getElementById('stat-winrate').textContent=winRate+'%';document.getElementById('stat-pnl').textContent=(totalPips>=0?'+':'')+totalPips;document.getElementById('stat-avg').textContent=(avgPips>=0?'+':'')+avgPips;document.getElementById('stat-best').textContent='+'+best;document.getElementById('stat-worst').textContent=worst;}

document.getElementById('trade-date').value=new Date().toISOString().split('T')[0];
updateWeekday();
calc();
load();
</script>
</body>
</html>