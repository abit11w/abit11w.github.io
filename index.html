
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="US100 Tracker">
<title>US100 Trading Tracker</title>
<style>
:root{--bg:#0a0e27;--card:#151932;--card-hover:#1a1f3a;--primary:#6366f1;--primary-dark:#4f46e5;--success:#10b981;--danger:#ef4444;--warning:#f59e0b;--text:#e2e8f0;--text-dim:#94a3b8;--border:#1e293b;}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);line-height:1.5;}
.header{background:linear-gradient(135deg,#1e293b 0%,#0f172a 100%);padding:20px;border-bottom:2px solid var(--primary);position:sticky;top:0;z-index:100;}
.header-content{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;}
.logo{font-size:24px;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--success));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;}
.quick-actions{display:flex;gap:10px;flex-wrap:wrap;}
.quick-btn{padding:10px 20px;border:none;background:var(--card);color:var(--text);border-radius:8px;cursor:pointer;font-weight:600;font-size:14px;transition:all 0.2s;border:1px solid var(--border);}
.quick-btn:hover{background:var(--card-hover);transform:translateY(-2px);}
.quick-btn.primary{background:var(--primary);border-color:var(--primary);}
.container{max-width:1400px;margin:0 auto;padding:30px 20px;}
.focus-mode{background:var(--card);border-radius:16px;padding:40px;margin-bottom:30px;border:2px solid var(--primary);box-shadow:0 0 20px rgba(99,102,241,0.3);}
.focus-title{font-size:14px;text-transform:uppercase;letter-spacing:2px;color:var(--primary);margin-bottom:20px;font-weight:700;}
.focus-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;}
.focus-card{background:var(--bg);padding:25px;border-radius:12px;border:2px solid var(--border);transition:all 0.3s;}
.focus-card:hover{border-color:var(--primary);}
.focus-card.alert{border-color:var(--warning);background:rgba(245,158,11,0.1);}
.focus-label{font-size:12px;color:var(--text-dim);margin-bottom:8px;font-weight:600;text-transform:uppercase;}
.focus-value{font-size:36px;font-weight:800;margin-bottom:5px;}
.focus-value.big{font-size:48px;}
.focus-value.success{color:var(--success);}
.focus-value.danger{color:var(--danger);}
.focus-value.warning{color:var(--warning);}
.focus-hint{font-size:13px;color:var(--text-dim);margin-top:8px;}
.checklist-hero{background:linear-gradient(135deg,var(--card) 0%,var(--card-hover) 100%);border-radius:16px;padding:35px;margin-bottom:30px;border:2px solid var(--border);}
.checklist-hero h2{font-size:20px;margin-bottom:20px;color:var(--primary);}
.killzone-info{background:linear-gradient(135deg,rgba(16,185,129,0.15) 0%,rgba(99,102,241,0.15) 100%);border:2px solid var(--success);border-radius:12px;padding:15px;margin-bottom:20px;display:flex;align-items:center;gap:12px;}
.killzone-info.hidden{display:none;}
.killzone-icon{font-size:24px;}
.killzone-text{flex:1;font-size:14px;font-weight:600;color:var(--text);}
.killzone-probability{font-size:18px;font-weight:800;color:var(--success);}
.checklist-items{display:grid;gap:12px;}
.check-item{background:var(--bg);padding:18px;border-radius:10px;display:flex;align-items:center;gap:15px;cursor:pointer;transition:all 0.2s;border:2px solid var(--border);}
.check-item:hover{border-color:var(--primary);}
.check-item.checked{background:rgba(16,185,129,0.15);border-color:var(--success);}
.check-item input{width:24px;height:24px;cursor:pointer;accent-color:var(--success);}
.check-item label{font-size:16px;font-weight:600;cursor:pointer;flex:1;}
.check-item.checked label{color:var(--success);}
.check-status{font-size:12px;padding:6px 12px;border-radius:20px;background:var(--border);color:var(--text-dim);font-weight:700;}
.check-item.checked .check-status{background:var(--success);color:white;}
.trade-input{background:var(--card);border-radius:16px;padding:35px;border:2px solid var(--border);}
.trade-input h2{margin-bottom:25px;font-size:20px;}
.input-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:25px;}
.input-group{display:flex;flex-direction:column;gap:8px;}
.input-group label{font-size:13px;font-weight:700;color:var(--text-dim);text-transform:uppercase;}
.input-group input,.input-group select,.input-group textarea{background:var(--bg);border:2px solid var(--border);color:var(--text);padding:14px;border-radius:8px;font-size:16px;font-weight:600;font-family:inherit;}
.input-group input:focus,.input-group select:focus,.input-group textarea:focus{outline:none;border-color:var(--primary);}
.input-group textarea{resize:vertical;min-height:80px;font-weight:400;}
.live-calc{background:linear-gradient(135deg,rgba(99,102,241,0.2) 0%,rgba(16,185,129,0.2) 100%);padding:25px;border-radius:12px;margin-top:25px;border:2px solid var(--primary);}
.calc-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px;}
.calc-item{text-align:center;}
.calc-label{font-size:11px;color:var(--text-dim);margin-bottom:5px;font-weight:700;text-transform:uppercase;}
.calc-value{font-size:28px;font-weight:800;}
.calc-value.good{color:var(--success);}
.calc-value.bad{color:var(--danger);}
.btn-group{display:flex;gap:12px;margin-top:25px;}
.btn{padding:16px 32px;border:none;border-radius:10px;font-weight:700;font-size:15px;cursor:pointer;transition:all 0.2s;text-transform:uppercase;}
.btn-save{background:var(--success);color:white;flex:1;}
.btn-save:hover{background:#059669;}
.btn-cancel{background:var(--card);color:var(--text);border:2px solid var(--border);}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px;}
.stat-card{background:var(--card);padding:30px;border-radius:12px;border:2px solid var(--border);position:relative;overflow:hidden;}
.stat-card::before{content:'';position:absolute;top:0;left:0;width:100%;height:4px;background:linear-gradient(90deg,var(--primary),var(--success));}
.stat-label{font-size:12px;color:var(--text-dim);margin-bottom:10px;font-weight:700;text-transform:uppercase;}
.stat-value{font-size:42px;font-weight:800;line-height:1;}
.stat-value.success{color:var(--success);}
.stat-value.danger{color:var(--danger);}
.stat-subtext{font-size:14px;color:var(--text-dim);margin-top:10px;}
.trade-list{display:flex;flex-direction:column;gap:15px;}
.trade-card{background:var(--card);padding:25px;border-radius:12px;border:2px solid var(--border);position:relative;}
.trade-card.profit{border-left:4px solid var(--success);}
.trade-card.loss{border-left:4px solid var(--danger);}
.trade-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:20px;}
.trade-date{color:var(--text-dim);font-size:13px;font-weight:600;margin-bottom:8px;}
.trade-result{font-size:32px;font-weight:800;}
.trade-result.profit{color:var(--success);}
.trade-result.loss{color:var(--danger);}
.delete-btn{background:rgba(239,68,68,0.2);border:none;color:var(--danger);padding:8px 12px;border-radius:6px;cursor:pointer;font-size:18px;font-weight:700;}
.delete-btn:hover{background:var(--danger);color:white;}
.trade-details{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:15px;padding:20px;background:var(--bg);border-radius:8px;margin-bottom:15px;}
.detail-item label{font-size:11px;color:var(--text-dim);display:block;margin-bottom:5px;font-weight:700;}
.detail-value{font-size:18px;font-weight:700;}
.trade-tags{display:flex;flex-wrap:wrap;gap:8px;}
.tag{padding:6px 14px;background:rgba(99,102,241,0.2);color:var(--primary);border-radius:20px;font-size:12px;font-weight:700;border:1px solid var(--primary);}
.tag.pattern{background:rgba(99,102,241,0.2);color:var(--primary);border-color:var(--primary);}
.tag.error{background:rgba(239,68,68,0.2);color:var(--danger);border-color:var(--danger);}
.tag.note{background:rgba(245,158,11,0.2);color:var(--warning);border-color:var(--warning);}
.tag.killzone{background:rgba(16,185,129,0.2);color:var(--success);border-color:var(--success);}
.nav-tabs{display:flex;gap:10px;margin-bottom:30px;background:var(--card);padding:8px;border-radius:12px;border:2px solid var(--border);flex-wrap:wrap;}
.nav-tabs button{padding:12px 24px;border:none;background:transparent;color:var(--text-dim);border-radius:8px;cursor:pointer;font-weight:700;font-size:14px;}
.nav-tabs button.active{background:var(--primary);color:white;}
.empty-state{text-align:center;padding:80px 20px;background:var(--card);border-radius:16px;border:2px dashed var(--border);}
.hidden{display:none !important;}
.progress-bar{width:100%;height:8px;background:var(--bg);border-radius:10px;overflow:hidden;margin-top:10px;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--success));transition:width 0.3s;border-radius:10px;}
.playbook-section{background:var(--card);border-radius:16px;padding:35px;margin-bottom:30px;border:2px solid var(--border);}
.playbook-title{font-size:24px;font-weight:800;margin-bottom:30px;background:linear-gradient(135deg,var(--primary),var(--success));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;}
.playbook-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px;margin-bottom:30px;}
.playbook-card{background:var(--bg);padding:25px;border-radius:12px;border:2px solid var(--border);transition:all 0.3s;}
.playbook-card:hover{border-color:var(--primary);transform:translateY(-2px);}
.playbook-card-header{display:flex;align-items:center;gap:12px;margin-bottom:15px;}
.playbook-icon{font-size:32px;}
.playbook-card-title{font-size:18px;font-weight:700;color:var(--primary);}
.playbook-card-value{font-size:36px;font-weight:800;margin:15px 0;color:var(--text);}
.playbook-card-value.success{color:var(--success);}
.playbook-card-value.danger{color:var(--danger);}
.playbook-card-sub{font-size:13px;color:var(--text-dim);margin-top:8px;}
.chart-container{background:var(--bg);padding:20px;border-radius:10px;margin-top:20px;}
.chart-bar{display:flex;align-items:center;gap:15px;margin-bottom:15px;}
.chart-label{min-width:120px;font-size:13px;font-weight:600;color:var(--text-dim);}
.chart-bar-fill{flex:1;height:30px;background:var(--border);border-radius:6px;overflow:hidden;position:relative;}
.chart-bar-progress{height:100%;background:linear-gradient(90deg,var(--primary),var(--success));transition:width 0.5s;display:flex;align-items:center;justify-content:flex-end;padding-right:10px;color:white;font-weight:700;font-size:12px;}
.chart-value{min-width:80px;text-align:right;font-size:14px;font-weight:700;color:var(--text);}
.optimization-tips{background:linear-gradient(135deg,rgba(99,102,241,0.1) 0%,rgba(16,185,129,0.1) 100%);border-radius:12px;padding:25px;border:2px solid var(--primary);margin-top:30px;}
.optimization-tips h3{font-size:18px;margin-bottom:20px;color:var(--primary);}
.tip-item{background:var(--bg);padding:15px;border-radius:8px;margin-bottom:12px;border-left:4px solid var(--primary);display:flex;align-items:start;gap:12px;}
.tip-icon{font-size:20px;flex-shrink:0;}
.tip-text{flex:1;font-size:14px;line-height:1.6;}
.multi-select{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;}
.multi-select-item{background:var(--bg);border:2px solid var(--border);padding:8px 14px;border-radius:20px;cursor:pointer;font-size:13px;font-weight:600;transition:all 0.2s;}
.multi-select-item:hover{border-color:var(--primary);}
.multi-select-item.selected{background:var(--primary);border-color:var(--primary);color:white;}
.multi-select-item.error.selected{background:var(--danger);border-color:var(--danger);}
.multi-select-item.pattern.selected{background:var(--primary);border-color:var(--primary);}
.calendar-container{background:var(--card);border-radius:16px;padding:35px;border:2px solid var(--border);}
.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;}
.calendar-nav-btn{background:var(--bg);border:2px solid var(--border);color:var(--text);padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:700;font-size:14px;transition:all 0.2s;}
.calendar-nav-btn:hover{background:var(--card-hover);border-color:var(--primary);}
.calendar-month{font-size:24px;font-weight:800;color:var(--primary);}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:15px;}
.calendar-day-header{text-align:center;padding:12px;font-size:12px;font-weight:700;color:var(--text-dim);text-transform:uppercase;}
.calendar-day{background:var(--bg);border:2px solid var(--border);border-radius:8px;padding:12px;min-height:80px;cursor:pointer;transition:all 0.2s;position:relative;}
.calendar-day:hover{border-color:var(--primary);}
.calendar-day.other-month{opacity:0.3;}
.calendar-day.today{border-color:var(--primary);background:rgba(99,102,241,0.1);}
.calendar-day-number{font-size:14px;font-weight:700;margin-bottom:6px;color:var(--text);}
.calendar-trade{font-size:11px;padding:4px 6px;border-radius:4px;margin-bottom:4px;font-weight:600;}
.calendar-trade.profit{background:rgba(16,185,129,0.2);color:var(--success);}
.calendar-trade.loss{background:rgba(239,68,68,0.2);color:var(--danger);}
.strategy-section{background:var(--card);border-radius:16px;padding:35px;margin-bottom:30px;border:2px solid var(--border);}
.strategy-title{font-size:20px;font-weight:800;margin-bottom:25px;color:var(--primary);border-bottom:2px solid var(--border);padding-bottom:15px;}
.strategy-card{background:var(--bg);padding:25px;border-radius:12px;border:2px solid var(--border);margin-bottom:20px;}
.strategy-card h3{font-size:18px;color:var(--primary);margin-bottom:15px;display:flex;align-items:center;gap:10px;}
.strategy-list{list-style:none;padding:0;}
.strategy-list li{padding:12px 0;border-bottom:1px solid var(--border);display:flex;align-items:start;gap:12px;}
.strategy-list li:last-child{border-bottom:none;}
.strategy-list li::before{content:'‚úì';color:var(--success);font-weight:800;font-size:18px;flex-shrink:0;}
.strategy-text{flex:1;font-size:15px;line-height:1.6;color:var(--text);}
.strategy-image{width:100%;border-radius:12px;margin:20px 0;border:2px solid var(--border);box-shadow:0 4px 12px rgba(0,0,0,0.3);}
.strategy-step{background:var(--bg);padding:20px;border-radius:12px;border-left:4px solid var(--primary);margin-bottom:20px;}
.strategy-step-number{display:inline-block;width:32px;height:32px;background:var(--primary);color:white;border-radius:50%;text-align:center;line-height:32px;font-weight:800;margin-right:12px;font-size:16px;}
.strategy-step-title{font-size:18px;font-weight:700;color:var(--primary);margin-bottom:10px;display:flex;align-items:center;}
.strategy-step-content{font-size:14px;line-height:1.8;color:var(--text);margin-left:44px;}
@media(max-width:768px){.input-grid{grid-template-columns:1fr;}.calc-grid{grid-template-columns:repeat(2,1fr);}.stats-grid{grid-template-columns:1fr;}.focus-grid{grid-template-columns:1fr;}.playbook-grid{grid-template-columns:1fr;}.calendar-grid{grid-template-columns:repeat(7,1fr);gap:4px;}.calendar-day{min-height:60px;padding:8px;}}
</style>
</head>
<body>
<div class="header"><div class="header-content"><div class="logo">‚ö° US100 TRACKER</div><div class="quick-actions"><button class="quick-btn primary" onclick="scrollToEntry()">+ NEUER TRADE</button><button class="quick-btn" onclick="exportData()">üíæ Export</button><button class="quick-btn" onclick="document.getElementById('import-file').click()">üìÇ Import</button><input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(event)"></div></div></div>
<div class="container">
<div class="focus-mode"><div class="focus-title">üéØ DEIN FOKUS</div><div class="focus-grid"><div class="focus-card"><div class="focus-label">Heutige Performance</div><div class="focus-value big success" id="today-pnl">+0</div><div class="focus-hint">Pips heute</div></div><div class="focus-card"><div class="focus-label">Win Streak</div><div class="focus-value warning" id="win-streak">0</div><div class="focus-hint">Trades in Folge</div></div><div class="focus-card alert"><div class="focus-label">Setup Qualit√§t</div><div class="focus-value" id="setup-quality">0%</div><div class="focus-hint">Vollst√§ndige Setups</div><div class="progress-bar"><div class="progress-fill" id="quality-progress" style="width:0%"></div></div></div><div class="focus-card"><div class="focus-label">Durchschnitt/Trade</div><div class="focus-value" id="avg-per-trade">0</div><div class="focus-hint">Pips pro Trade</div></div></div></div>
<div class="nav-tabs"><button class="active" onclick="changeView('entry')" id="btn-entry">üìù Trade eingeben</button><button onclick="changeView('calendar')" id="btn-calendar">üìÖ Kalender</button><button onclick="changeView('stats')" id="btn-stats">üìä Performance</button><button onclick="changeView('playbook')" id="btn-playbook">üìñ Playbook</button><button onclick="changeView('history')" id="btn-history">üìã Historie</button></div>
<div id="view-entry">
<div class="checklist-hero"><h2>‚úÖ Setup Checkliste - Alle Punkte pr√ºfen!</h2><div class="killzone-info hidden" id="killzone-info"><div class="killzone-icon">üéØ</div><div class="killzone-text">Heute wurde bereits eine Killzone geholt - <strong>erh√∂hte Wahrscheinlichkeit</strong> f√ºr das Eintreten des Modells!</div><div class="killzone-probability" id="killzone-probability">+15%</div></div><div class="checklist-items"><div class="check-item" onclick="toggleCheck('liquidityGrab')"><input type="checkbox" id="check-liquidityGrab"><label>Liquidity Grab identifiziert</label><span class="check-status">Warten</span></div><div class="check-item" onclick="toggleCheck('firstImpulse')"><input type="checkbox" id="check-firstImpulse"><label>First Impulse best√§tigt</label><span class="check-status">Warten</span></div><div class="check-item" onclick="toggleCheck('secondImpulse')"><input type="checkbox" id="check-secondImpulse"><label>Second Impulse best√§tigt</label><span class="check-status">Warten</span></div><div class="check-item" onclick="toggleCheck('pullback')"><input type="checkbox" id="check-pullback"><label>Pullback abgeschlossen</label><span class="check-status">Warten</span></div><div class="check-item" onclick="toggleCheck('killzoneLow')"><input type="checkbox" id="check-killzoneLow"><label>Killzone Low abgeholt</label><span class="check-status">Warten</span></div><div class="check-item" onclick="toggleCheck('killzoneHigh')"><input type="checkbox" id="check-killzoneHigh"><label>Killzone High abgeholt</label><span class="check-status">Warten</span></div><div class="check-item" onclick="toggleCheck('setupComplete')"><input type="checkbox" id="check-setupComplete"><label>Setup 100% komplett</label><span class="check-status">Warten</span></div></div></div>
<div class="trade-input"><h2>üíº Trade Details erfassen</h2><div class="input-grid"><div class="input-group"><label>üìÖ Datum</label><input type="date" id="trade-date" onchange="updateWeekday()"></div><div class="input-group"><label>üìÜ Wochentag</label><select id="trade-weekday"><option value="Montag">Montag</option><option value="Dienstag">Dienstag</option><option value="Mittwoch">Mittwoch</option><option value="Donnerstag">Donnerstag</option><option value="Freitag">Freitag</option></select></div><div class="input-group"><label>üè∑Ô∏è Session</label><select id="trade-session"><option value="Asian">Asian</option><option value="London">London</option><option value="New York">New York</option><option value="Overlap">Overlap (London/NY)</option></select></div><div class="input-group"><label>üìä Fibo Level</label><select id="trade-fibo"><option value="0.23">0.23</option><option value="0.38">0.38</option><option value="0.61">0.61</option><option value="0.78">0.78</option></select></div><div class="input-group"><label>üéØ Entry</label><input type="range" step="5" id="trade-entry" placeholder="25300.50" oninput="calcLive()"></div><div class="input-group"><label>üõë Stop Loss</label><input type="number" step="0.1" id="trade-sl" placeholder="25250.50" oninput="calcLive()"></div><div class="input-group"><label>‚úÖ Take Profit</label><input type="number" step="0.1" id="trade-tp" placeholder="25350.50" oninput="calcLive()"></div><div class="input-group"><label>üí∞ Lot Gr√∂√üe</label><input type="number" step="0.1" id="trade-lot" placeholder="2.0" oninput="calcLive()"></div></div><div class="input-group"><label>üé® Pattern (Mehrfachauswahl)</label><div class="multi-select"><div class="multi-select-item pattern" onclick="toggleMultiSelect(this)">Double Top</div><div class="multi-select-item pattern" onclick="toggleMultiSelect(this)">Double Bottom</div><div class="multi-select-item pattern" onclick="toggleMultiSelect(this)">Breakout</div><div class="multi-select-item pattern" onclick="toggleMultiSelect(this)">Reversal</div><div class="multi-select-item pattern" onclick="toggleMultiSelect(this)">Trend Continuation</div><div class="multi-select-item pattern" onclick="toggleMultiSelect(this)">Range</div></div></div><div class="input-group"><label>‚ö†Ô∏è Fehler/Trading Psychologie (Mehrfachauswahl)</label><div class="multi-select"><div class="multi-select-item error" onclick="toggleMultiSelect(this)">FOMO</div><div class="multi-select-item error" onclick="toggleMultiSelect(this)">Revenge Trading</div><div class="multi-select-item error" onclick="toggleMultiSelect(this)">Overtrading</div><div class="multi-select-item error" onclick="toggleMultiSelect(this)">Emotionale Entscheidung</div><div class="multi-select-item error" onclick="toggleMultiSelect(this)">Zu fr√ºher Exit</div><div class="multi-select-item error" onclick="toggleMultiSelect(this)">Zu sp√§te Entry</div><div class="multi-select-item error" onclick="toggleMultiSelect(this)">Risk Management Fehler</div></div></div><div class="input-group"><label>üìù Notizen (Execution Journaling)</label><textarea id="trade-notes" placeholder="Was war der Trigger? Wie war dein mentaler Zustand? Execution-Qualit√§t? Was hast du gelernt?"></textarea></div><div class="live-calc"><div class="calc-grid"><div class="calc-item"><div class="calc-label">Risk Pips</div><div class="calc-value" id="calc-risk">0</div></div><div class="calc-item"><div class="calc-label">Reward Pips</div><div class="calc-value" id="calc-reward">0</div></div><div class="calc-item"><div class="calc-label">R:R Ratio</div><div class="calc-value good" id="calc-rr">0:0</div></div><div class="calc-item"><div class="calc-label">M√∂glicher $</div><div class="calc-value" id="calc-dollar">$0</div></div></div></div><div class="btn-group"><button class="btn btn-save" onclick="saveTrade()">üíæ Trade speichern</button><button class="btn btn-cancel" onclick="resetForm()">üîÑ Zur√ºcksetzen</button></div></div>
</div>
<div id="view-calendar" class="hidden"><div class="calendar-container"><div class="calendar-header"><button class="calendar-nav-btn" onclick="changeMonth(-1)">‚Üê Vorheriger</button><div class="calendar-month" id="calendar-month-year"></div><button class="calendar-nav-btn" onclick="changeMonth(1)">N√§chster ‚Üí</button></div><div class="calendar-grid" id="calendar-grid"></div></div></div>
<div id="view-stats" class="hidden"><div class="stats-grid"><div class="stat-card"><div class="stat-label">Gesamt Trades</div><div class="stat-value" id="stat-total">0</div></div><div class="stat-card"><div class="stat-label">Win Rate</div><div class="stat-value success" id="stat-winrate">0%</div><div class="stat-subtext" id="stat-wl">0W / 0L</div></div><div class="stat-card"><div class="stat-label">Gesamt P&L</div><div class="stat-value" id="stat-pnl">0</div><div class="stat-subtext">Pips</div></div><div class="stat-card"><div class="stat-label">Durchschnitt</div><div class="stat-value" id="stat-avg">0</div><div class="stat-subtext">Pips/Trade</div></div><div class="stat-card"><div class="stat-label">Bester Trade</div><div class="stat-value success" id="stat-best">0</div><div class="stat-subtext">Pips</div></div><div class="stat-card"><div class="stat-label">Schlechtester</div><div class="stat-value danger" id="stat-worst">0</div><div class="stat-subtext">Pips</div></div></div><div class="playbook-section" style="margin-top:30px;"><h2 class="playbook-title">üìä PERFORMANCE ANALYSE</h2><div class="playbook-grid"><div class="playbook-card"><div class="playbook-card-header"><div class="playbook-icon">üèÜ</div><div class="playbook-card-title">Beste Session</div></div><div class="playbook-card-value success" id="perf-session">-</div><div class="playbook-card-sub" id="perf-session-sub">Wo performst du am besten?</div></div><div class="playbook-card"><div class="playbook-card-header"><div class="playbook-icon">üìÖ</div><div class="playbook-card-title">Bester Wochentag</div></div><div class="playbook-card-value success" id="perf-weekday">-</div><div class="playbook-card-sub" id="perf-weekday-sub">An welchem Tag machst du die meisten Pips?</div></div><div class="playbook-card"><div class="playbook-card-header"><div class="playbook-icon">üé®</div><div class="playbook-card-title">Bestes Pattern</div></div><div class="playbook-card-value success" id="perf-pattern">-</div><div class="playbook-card-sub" id="perf-pattern-sub">Welches Setup funktioniert f√ºr dich?</div></div><div class="playbook-card"><div class="playbook-card-header"><div class="playbook-icon">‚ö†Ô∏è</div><div class="playbook-card-title">Gr√∂√ütes Problem</div></div><div class="playbook-card-value danger" id="perf-error">-</div><div class="playbook-card-sub" id="perf-error-sub">Welcher Fehler kostet dich am meisten?</div></div></div><div class="chart-container"><h3 style="margin-bottom:20px;color:var(--primary);font-size:18px;">üìä Session-Analyse</h3><div id="chart-sessions"></div></div><div class="chart-container" style="margin-top:25px;"><h3 style="margin-bottom:20px;color:var(--primary);font-size:18px;">üìÖ Wochentag-Analyse</h3><div id="chart-weekdays"></div></div><div class="optimization-tips"><h3>üéØ Optimierungspotenzial</h3><div id="optimization-tips-content"></div></div></div></div>
<div id="view-playbook" class="hidden"><div class="strategy-section"><h2 class="strategy-title">üìñ DEIN TRADING PLAYBOOK - STRATEGIE √úBERSICHT</h2><div style="margin-bottom:30px;"><img src="strategy-chart.png" alt="Trading Strategy Chart" class="strategy-image"><p style="text-align:center;color:var(--text-dim);font-size:13px;margin-top:10px;">Visuelle Darstellung der kompletten Strategie mit Liquidit√§t, Akkumulation, LEG UP und Golden Zone Entry</p></div><div style="margin-bottom:30px;"><img src="strategy-session-chart.png" alt="Session & Killzone Chart" class="strategy-image"><p style="text-align:center;color:var(--text-dim);font-size:13px;margin-top:10px;">Session Highs/Lows (ASIA HIGH, LONDON HIGH, NY AM LOW) und Killzone Low Liquidiert - Wichtige Levels f√ºr Entries</p></div><div class="strategy-card"><h3>üéØ Strategie-Ablauf (Step-by-Step)</h3><div class="strategy-step"><div class="strategy-step-title"><span class="strategy-step-number">1</span>Liquidit√§t / HTF ZONE</div><div class="strategy-step-content"><strong>Was ist das?</strong> Identifiziere Bereiche, wo Stop-Losses konzentriert sind (Support/Resistance Levels auf h√∂heren Timeframes).<br><strong>Wie erkenne ich es?</strong> Horizontale Linien bei wichtigen Swing Highs/Lows, wo viele Trader ihre Stops platzieren.<br><strong>Warum wichtig?</strong> Diese Zonen werden oft von "Smart Money" abgeholt, bevor der eigentliche Move startet.</div></div><div class="strategy-step"><div class="strategy-step-title"><span class="strategy-step-number">2</span>Akkumulation / Bodenbildung</div><div class="strategy-step-content"><strong>Was ist das?</strong> Seitw√§rtsbewegung nach einem Downtrend - Smart Money baut Positionen auf.<br><strong>Wie erkenne ich es?</strong> Konsolidierung √ºber mehrere Kerzen, geringe Volatilit√§t, Preis bewegt sich in einem Range.<br><strong>Warum wichtig?</strong> Zeigt, dass gro√üe Player Long-Positionen aufbauen - Vorbereitung f√ºr den n√§chsten Move.</div></div><div class="strategy-step"><div class="strategy-step-title"><span class="strategy-step-number">3</span>LEG UP / MOVE UP mit Volumen / FVG</div><div class="strategy-step-content"><strong>Was ist das?</strong> Starke impulsive Bewegung nach oben mit hohem Volumen - best√§tigt die Richtung.<br><strong>Wie erkenne ich es?</strong> Gro√üe gr√ºne Kerzen, hohes Volumen, Preis bricht aus der Akkumulation aus.<br><strong>FVG (Fair Value Gap):</strong> Bereich, wo Preis ineffizient geliefert wurde - wird oft sp√§ter zur√ºckgetestet.<br><strong>Warum wichtig?</strong> Best√§tigt, dass der Trend begonnen hat - Momentum ist da!</div></div><div class="strategy-step"><div class="strategy-step-title"><span class="strategy-step-number">4</span>Goldene Zone Entry / FVG ENTRY</div><div class="strategy-step-content"><strong>Was ist das?</strong> Pullback in die FVG-Zone bei Fibonacci-Levels (0.62 oder 0.79) - OPTIMALER ENTRY!<br><strong>Wie erkenne ich es?</strong> Preis zieht zur√ºck nach dem LEG UP, testet FVG-Zone und Fibonacci-Levels.<br><strong>Entry-Signal:</strong> Wenn Preis in die Goldene Zone (FVG + Fibo 0.62-0.79) zur√ºckkommt und Reaktion zeigt.<br><strong>Warum wichtig?</strong> Bestes Risk-Reward Verh√§ltnis - Entry nahe Support, hohes R:R Potential!</div></div></div><div class="strategy-card"><h3>üéØ Entry-Kriterien (Checkliste)</h3><ul class="strategy-list"><li><span class="strategy-text"><strong>Liquidity Grab:</strong> Identifiziere Bereiche, wo Stop-Losses konzentriert sind (Support/Resistance Levels)</span></li><li><span class="strategy-text"><strong>First Impulse:</strong> Erste starke Bewegung nach dem Liquidity Grab - best√§tigt die Richtung</span></li><li><span class="strategy-text"><strong>Second Impulse:</strong> Zweite Bewegung in die gleiche Richtung - zeigt Momentum</span></li><li><span class="strategy-text"><strong>Pullback:</strong> Zur√ºckziehen zum Fibo-Level (0.23, 0.38, 0.61, 0.78) - Entry-Zone</span></li><li><span class="strategy-text"><strong>Killzone Low/High:</strong> Abholen von Liquidit√§t an wichtigen Levels - Best√§tigung f√ºr Entry</span></li><li><span class="strategy-text"><strong>FVG Entry:</strong> Entry in der Fair Value Gap Zone bei Fibonacci-Levels (0.62-0.79) - Goldene Zone!</span></li><li><span class="strategy-text"><strong>Setup 100% komplett:</strong> Alle Kriterien m√ºssen erf√ºllt sein, bevor ein Trade eingegeben wird</span></li></ul></div><div class="strategy-card"><h3>üìê Fair Value Gap (FVG) & Fibonacci</h3><ul class="strategy-list"><li><span class="strategy-text"><strong>FVG Definition:</strong> Bereich, wo Preis ineffizient geliefert wurde - gro√üe Kerze mit Gap zu vorheriger/folgender Kerze</span></li><li><span class="strategy-text"><strong>FVG erkennen:</strong> Drei Kerzen - mittlere Kerze hat keine √úberlappung mit erster und dritter Kerze</span></li><li><span class="strategy-text"><strong>FVG als Support/Resistance:</strong> FVGs werden oft zur√ºckgetestet - perfekte Entry-Zonen!</span></li><li><span class="strategy-text"><strong>Fibonacci Retracement:</strong> 0.23, 0.38, 0.62, 0.79 - wichtigste Levels f√ºr Entries</span></li><li><span class="strategy-text"><strong>Goldene Zone:</strong> Kombination aus FVG + Fibo 0.62-0.79 = BESTER ENTRY!</span></li><li><span class="strategy-text"><strong>Fibonacci Extension:</strong> -0.23, 1.27, 1.618 - m√∂gliche Take-Profit Ziele</span></li></ul></div><div class="strategy-card"><h3>üìä Risk Management</h3><ul class="strategy-list"><li><span class="strategy-text"><strong>R:R Ratio:</strong> Mindestens 1:2 Risk-Reward Ratio anstreben (bei Golden Zone Entry oft 1:3+ m√∂glich!)</span></li><li><span class="strategy-text"><strong>Stop Loss:</strong> Immer setzen - unterhalb der FVG oder unterhalb des Killzone Low</span></li><li><span class="strategy-text"><strong>Take Profit:</strong> Basierend auf Fibo-Extensions, vorherigen Swing Highs/Lows oder Resistance-Zonen</span></li><li><span class="strategy-text"><strong>Position Sizing:</strong> Konsistentes Risk Management - nie mehr als 1-2% des Accounts riskieren</span></li></ul></div><div class="strategy-card"><h3>üé® Pattern Recognition</h3><ul class="strategy-list"><li><span class="strategy-text"><strong>Double Top/Bottom:</strong> Reversal-Pattern - zwei gleiche Hochs/Tiefs</span></li><li><span class="strategy-text"><strong>Breakout:</strong> Ausbruch aus Range/Konsolidierung - Momentum-Trade</span></li><li><span class="strategy-text"><strong>Reversal:</strong> Trendwende an wichtigen Levels - hohes R:R Potential</span></li><li><span class="strategy-text"><strong>Trend Continuation:</strong> Fortsetzung des bestehenden Trends nach Pullback</span></li><li><span class="strategy-text"><strong>Range:</strong> Trading zwischen Support und Resistance - Range-Bound Market</span></li></ul></div><div class="strategy-card"><h3>‚è∞ Timing & Sessions</h3><ul class="strategy-list"><li><span class="strategy-text"><strong>Asian Session:</strong> Geringere Volatilit√§t, Range-Bound Trading</span></li><li><span class="strategy-text"><strong>London Session:</strong> Hohe Volatilit√§t, starke Bewegungen - beste Zeit f√ºr Breakouts</span></li><li><span class="strategy-text"><strong>New York Session:</strong> Hohe Liquidit√§t, Trend-Fortsetzungen</span></li><li><span class="strategy-text"><strong>Overlap (London/NY):</strong> H√∂chste Volatilit√§t und Liquidit√§t - beste Trading-Zeit</span></li></ul></div><div class="strategy-card"><h3>‚ö†Ô∏è Trading Psychologie - Fehler vermeiden</h3><ul class="strategy-list"><li><span class="strategy-text"><strong>FOMO (Fear Of Missing Out):</strong> Nie einen Trade eingehen, nur weil man Angst hat, etwas zu verpassen</span></li><li><span class="strategy-text"><strong>Revenge Trading:</strong> Nach einem Loss nicht emotional handeln - Pause machen</span></li><li><span class="strategy-text"><strong>Overtrading:</strong> Qualit√§t vor Quantit√§t - nur die besten Setups nehmen</span></li><li><span class="strategy-text"><strong>Emotionale Entscheidungen:</strong> Immer dem Trading-Plan folgen, nicht den Emotionen</span></li><li><span class="strategy-text"><strong>Zu fr√ºher Exit:</strong> TP-Levels respektieren - nicht zu fr√ºh aussteigen</span></li><li><span class="strategy-text"><strong>Zu sp√§te Entry:</strong> Auf Pullback warten, nicht FOMO-Trades machen</span></li><li><span class="strategy-text"><strong>Risk Management Fehler:</strong> Immer SL setzen, Position Sizing respektieren</span></li></ul></div><div class="strategy-card"><h3>‚úÖ Execution Journaling</h3><ul class="strategy-list"><li><span class="strategy-text"><strong>Trigger dokumentieren:</strong> Was war der genaue Ausl√∂ser f√ºr den Trade?</span></li><li><span class="strategy-text"><strong>Mentaler Zustand:</strong> Wie war deine Stimmung? Konzentriert? Emotional?</span></li><li><span class="strategy-text"><strong>Execution-Qualit√§t:</strong> Hast du den Plan perfekt ausgef√ºhrt oder Abweichungen gemacht?</span></li><li><span class="strategy-text"><strong>Lernpunkte:</strong> Was hast du aus diesem Trade gelernt? Was w√ºrdest du anders machen?</span></li></ul></div></div></div>
<div id="view-history" class="hidden"><div class="trade-list" id="trade-list"></div></div>
</div>
<script>
let trades=[];let currentView='entry';
function loadTrades(){const s=localStorage.getItem('us100_v2');if(s)trades=JSON.parse(s);updateFocus();renderView();checkKillzoneToday();}
function save(){localStorage.setItem('us100_v2',JSON.stringify(trades));updateFocus();}
let currentCalendarDate=new Date();
function changeView(v){currentView=v;document.querySelectorAll('.nav-tabs button').forEach(b=>b.classList.remove('active'));document.getElementById('btn-'+v).classList.add('active');document.getElementById('view-entry').classList.add('hidden');document.getElementById('view-calendar').classList.add('hidden');document.getElementById('view-stats').classList.add('hidden');document.getElementById('view-history').classList.add('hidden');document.getElementById('view-playbook').classList.add('hidden');document.getElementById('view-'+v).classList.remove('hidden');renderView();}
function renderView(){if(currentView==='stats'){renderStats();renderPerformance();}if(currentView==='history')renderHistory();if(currentView==='calendar')renderCalendar();if(currentView==='entry')checkKillzoneToday();}
function updateWeekday(){const dateInput=document.getElementById('trade-date').value;if(dateInput){const date=new Date(dateInput);const weekdays=['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'];document.getElementById('trade-weekday').value=weekdays[date.getDay()];checkKillzoneToday();}}
function toggleMultiSelect(el){el.classList.toggle('selected');}
function updateFocus(){const today=new Date().toISOString().split('T')[0];const todayTrades=trades.filter(t=>t.date===today);const todayPips=todayTrades.reduce((sum,t)=>sum+(t.tp-t.sl),0);document.getElementById('today-pnl').textContent=(todayPips>=0?'+':'')+todayPips;document.getElementById('today-pnl').className='focus-value big '+(todayPips>=0?'success':'danger');let streak=0;for(let i=trades.length-1;i>=0;i--){if(trades[i].tp-trades[i].sl>0)streak++;else break;}document.getElementById('win-streak').textContent=streak;let complete=0;trades.forEach(t=>{if(!t.setup)return;let c=0;if(t.setup.liquidityGrab)c++;if(t.setup.firstImpulse)c++;if(t.setup.secondImpulse)c++;if(t.setup.pullback)c++;if(t.setup.killzoneLow)c++;if(t.setup.setupComplete)c++;if(c===6)complete++;});const q=trades.length>0?((complete/trades.length)*100).toFixed(0):0;document.getElementById('setup-quality').textContent=q+'%';document.getElementById('quality-progress').style.width=q+'%';const avg=trades.length>0?(trades.reduce((sum,t)=>sum+(t.tp-t.sl),0)/trades.length).toFixed(1):0;document.getElementById('avg-per-trade').textContent=(avg>=0?'+':'')+avg;document.getElementById('avg-per-trade').className='focus-value '+(avg>=0?'success':'danger');}
function renderStats(){const total=trades.length;const wins=trades.filter(t=>t.tp-t.sl>0).length;const losses=total-wins;const totalPips=trades.reduce((sum,t)=>sum+(t.tp-t.sl),0);const winRate=total>0?((wins/total)*100).toFixed(1):0;const avgPips=total>0?(totalPips/total).toFixed(1):0;const best=trades.length>0?Math.max(...trades.map(t=>t.tp-t.sl)):0;const worst=trades.length>0?Math.min(...trades.map(t=>t.tp-t.sl)):0;document.getElementById('stat-total').textContent=total;document.getElementById('stat-winrate').textContent=winRate+'%';document.getElementById('stat-wl').textContent=wins+'W / '+losses+'L';const pnlEl=document.getElementById('stat-pnl');pnlEl.textContent=(totalPips>=0?'+':'')+totalPips;pnlEl.className='stat-value '+(totalPips>=0?'success':'danger');const avgEl=document.getElementById('stat-avg');avgEl.textContent=(avgPips>=0?'+':'')+avgPips;avgEl.className='stat-value '+(avgPips>=0?'success':'danger');document.getElementById('stat-best').textContent='+'+best;document.getElementById('stat-worst').textContent=worst;}
function renderCalendar(){const year=currentCalendarDate.getFullYear();const month=currentCalendarDate.getMonth();const monthNames=['Januar','Februar','M√§rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'];document.getElementById('calendar-month-year').textContent=monthNames[month]+' '+year;const firstDay=new Date(year,month,1);const lastDay=new Date(year,month+1,0);const daysInMonth=lastDay.getDate();const startingDayOfWeek=firstDay.getDay();const days=['So','Mo','Di','Mi','Do','Fr','Sa'];let html='';days.forEach(day=>html+='<div class="calendar-day-header">'+day+'</div>');const prevMonthLastDay=new Date(year,month,0).getDate();for(let i=startingDayOfWeek-1;i>=0;i--){const day=prevMonthLastDay-i;html+='<div class="calendar-day other-month"><div class="calendar-day-number">'+day+'</div></div>';}const today=new Date();for(let day=1;day<=daysInMonth;day++){const dateStr=year+'-'+(month+1).toString().padStart(2,'0')+'-'+day.toString().padStart(2,'0');const dayTrades=trades.filter(t=>t.date===dateStr);const isToday=today.getFullYear()===year&&today.getMonth()===month&&today.getDate()===day;let dayClass='calendar-day';if(isToday)dayClass+=' today';const dayPips=dayTrades.reduce((sum,t)=>sum+(t.tp-t.sl),0);html+='<div class="'+dayClass+'"><div class="calendar-day-number">'+day+'</div>';if(dayTrades.length>0){dayTrades.forEach(t=>{const pips=t.tp-t.sl;html+='<div class="calendar-trade '+(pips>=0?'profit':'loss')+'">'+(pips>=0?'+':'')+pips+' Pips</div>';});if(dayPips!==0){html+='<div style="font-size:10px;color:var(--text-dim);margin-top:4px;font-weight:700;">Total: '+(dayPips>=0?'+':'')+dayPips+'</div>';}}html+='</div>';}const remainingDays=42-(startingDayOfWeek+daysInMonth);for(let day=1;day<=remainingDays;day++){html+='<div class="calendar-day other-month"><div class="calendar-day-number">'+day+'</div></div>';}document.getElementById('calendar-grid').innerHTML=html;}
function changeMonth(direction){currentCalendarDate.setMonth(currentCalendarDate.getMonth()+direction);renderCalendar();}
function renderPerformance(){if(trades.length===0){document.getElementById('perf-session').textContent='-';document.getElementById('perf-weekday').textContent='-';document.getElementById('perf-pattern').textContent='-';document.getElementById('perf-error').textContent='-';document.getElementById('chart-sessions').innerHTML='<p style="color:var(--text-dim);text-align:center;padding:40px;">Noch keine Trades vorhanden</p>';document.getElementById('chart-weekdays').innerHTML='<p style="color:var(--text-dim);text-align:center;padding:40px;">Noch keine Trades vorhanden</p>';document.getElementById('optimization-tips-content').innerHTML='<p style="color:var(--text-dim);text-align:center;padding:20px;">Beginne mit deinem ersten Trade!</p>';return;}const sessions={};const weekdays={};const patterns={};const errors={};trades.forEach(t=>{const pips=t.tp-t.sl;if(t.session){if(!sessions[t.session])sessions[t.session]={total:0,pips:0,wins:0};sessions[t.session].total++;sessions[t.session].pips+=pips;if(pips>0)sessions[t.session].wins++;}if(t.weekday){if(!weekdays[t.weekday])weekdays[t.weekday]={total:0,pips:0,wins:0};weekdays[t.weekday].total++;weekdays[t.weekday].pips+=pips;if(pips>0)weekdays[t.weekday].wins++;}if(t.patterns){t.patterns.forEach(p=>{if(!patterns[p])patterns[p]={total:0,pips:0,wins:0};patterns[p].total++;patterns[p].pips+=pips;if(pips>0)patterns[p].wins++;});}if(t.errors){t.errors.forEach(e=>{if(!errors[e])errors[e]={total:0,pips:0};errors[e].total++;errors[e].pips+=pips;});}});let bestSession={name:'-',pips:0};Object.keys(sessions).forEach(s=>{if(sessions[s].pips>bestSession.pips){bestSession={name:s,pips:sessions[s].pips,winRate:((sessions[s].wins/sessions[s].total)*100).toFixed(1),total:sessions[s].total};}});document.getElementById('perf-session').textContent=bestSession.name;document.getElementById('perf-session-sub').textContent=bestSession.name!=='-'?bestSession.total+' Trades | '+bestSession.winRate+'% WR | '+(bestSession.pips>=0?'+':'')+bestSession.pips+' Pips':'Wo performst du am besten?';let bestWeekday={name:'-',pips:0};Object.keys(weekdays).forEach(w=>{if(weekdays[w].pips>bestWeekday.pips){bestWeekday={name:w,pips:weekdays[w].pips,winRate:((weekdays[w].wins/weekdays[w].total)*100).toFixed(1),total:weekdays[w].total};}});document.getElementById('perf-weekday').textContent=bestWeekday.name;document.getElementById('perf-weekday-sub').textContent=bestWeekday.name!=='-'?bestWeekday.total+' Trades | '+bestWeekday.winRate+'% WR | '+(bestWeekday.pips>=0?'+':'')+bestWeekday.pips+' Pips':'An welchem Tag machst du die meisten Pips?';let bestPattern={name:'-',pips:0};Object.keys(patterns).forEach(p=>{if(patterns[p].pips>bestPattern.pips){bestPattern={name:p,pips:patterns[p].pips,winRate:((patterns[p].wins/patterns[p].total)*100).toFixed(1),total:patterns[p].total};}});document.getElementById('perf-pattern').textContent=bestPattern.name;document.getElementById('perf-pattern-sub').textContent=bestPattern.name!=='-'?bestPattern.total+' Trades | '+bestPattern.winRate+'% WR | '+(bestPattern.pips>=0?'+':'')+bestPattern.pips+' Pips':'Welches Setup funktioniert f√ºr dich?';let worstError={name:'-',pips:0,total:0};Object.keys(errors).forEach(e=>{if(errors[e].pips<worstError.pips||(errors[e].pips===worstError.pips&&errors[e].total>worstError.total)){worstError={name:e,pips:errors[e].pips,total:errors[e].total};}});document.getElementById('perf-error').textContent=worstError.name;document.getElementById('perf-error-sub').textContent=worstError.name!=='-'?worstError.total+'x gemacht | '+(worstError.pips>=0?'+':'')+worstError.pips+' Pips':'Welcher Fehler kostet dich am meisten?';let sessionHtml='';const sessionEntries=Object.keys(sessions).map(s=>({name:s,...sessions[s]})).sort((a,b)=>b.pips-a.pips);const maxSessionPips=sessionEntries.length>0?Math.max(...sessionEntries.map(s=>Math.abs(s.pips))):1;sessionEntries.forEach(s=>{const winRate=((s.wins/s.total)*100).toFixed(0);const width=Math.abs(s.pips)/maxSessionPips*100;sessionHtml+='<div class="chart-bar"><div class="chart-label">'+s.name+'</div><div class="chart-bar-fill"><div class="chart-bar-progress" style="width:'+width+'%;background:'+(s.pips>=0?'linear-gradient(90deg,var(--success),#059669)':'linear-gradient(90deg,var(--danger),#dc2626)')+'">'+s.total+' Trades</div></div><div class="chart-value">'+(s.pips>=0?'+':'')+s.pips+' Pips<br><span style="font-size:11px;color:var(--text-dim)">'+winRate+'% WR</span></div></div>';});document.getElementById('chart-sessions').innerHTML=sessionHtml||'<p style="color:var(--text-dim);text-align:center;padding:20px;">Keine Session-Daten</p>';let weekdayHtml='';const weekdayEntries=Object.keys(weekdays).map(w=>({name:w,...weekdays[w]})).sort((a,b)=>b.pips-a.pips);const maxWeekdayPips=weekdayEntries.length>0?Math.max(...weekdayEntries.map(w=>Math.abs(w.pips))):1;weekdayEntries.forEach(w=>{const winRate=((w.wins/w.total)*100).toFixed(0);const width=Math.abs(w.pips)/maxWeekdayPips*100;weekdayHtml+='<div class="chart-bar"><div class="chart-label">'+w.name+'</div><div class="chart-bar-fill"><div class="chart-bar-progress" style="width:'+width+'%;background:'+(w.pips>=0?'linear-gradient(90deg,var(--success),#059669)':'linear-gradient(90deg,var(--danger),#dc2626)')+'">'+w.total+' Trades</div></div><div class="chart-value">'+(w.pips>=0?'+':'')+w.pips+' Pips<br><span style="font-size:11px;color:var(--text-dim)">'+winRate+'% WR</span></div></div>';});document.getElementById('chart-weekdays').innerHTML=weekdayHtml||'<p style="color:var(--text-dim);text-align:center;padding:20px;">Keine Wochentag-Daten</p>';const totalPips=trades.reduce((sum,t)=>sum+(t.tp-t.sl),0);const wins=trades.filter(t=>t.tp-t.sl>0).length;const winRate=((wins/trades.length)*100).toFixed(1);const avgRR=trades.map(t=>{const risk=Math.abs(t.entry-t.sl);const reward=Math.abs(t.tp-t.entry);return risk>0?reward/risk:0;}).reduce((sum,rr)=>sum+rr,0)/trades.length;let tipsHtml='';if(totalPips<0){tipsHtml+='<div class="tip-item"><div class="tip-icon">üö®</div><div class="tip-text"><strong>Negatives P&L:</strong> Fokussiere dich auf Setup-Qualit√§t. Nur Trades mit vollst√§ndiger Checkliste nehmen!</div></div>';}if(winRate<50){tipsHtml+='<div class="tip-item"><div class="tip-icon">‚ö†Ô∏è</div><div class="tip-text"><strong>Win Rate unter 50%:</strong> √úberpr√ºfe deine Entry-Timing und warte auf bessere Setups. Qualit√§t vor Quantit√§t!</div></div>';}if(avgRR<1.5){tipsHtml+='<div class="tip-item"><div class="tip-icon">üìä</div><div class="tip-text"><strong>R:R zu niedrig:</strong> Ziel auf mindestens 1:2 R:R. Besserer Risk-Reward = weniger Trades n√∂tig f√ºr Profit!</div></div>';}if(worstError.name!=='-'&&worstError.total>=3){tipsHtml+='<div class="tip-item"><div class="tip-icon">‚ö†Ô∏è</div><div class="tip-text"><strong>Wiederkehrender Fehler: '+worstError.name+'</strong> ('+worstError.total+'x gemacht). Bewusstsein schaffen und Trading-Plan anpassen!</div></div>';}if(bestSession.name!=='-'&&bestSession.pips>0){tipsHtml+='<div class="tip-item"><div class="tip-icon">‚úÖ</div><div class="tip-text"><strong>Stark in '+bestSession.name+' Session!</strong> Fokussiere dich mehr auf diese Zeit. Du performst hier am besten ('+bestSession.winRate+'% WR).</div></div>';}if(bestPattern.name!=='-'&&bestPattern.pips>0){tipsHtml+='<div class="tip-item"><div class="tip-icon">üéØ</div><div class="tip-text"><strong>Bestes Pattern: '+bestPattern.name+'</strong> ('+bestPattern.winRate+'% WR). Suche gezielt nach diesem Setup!</div></div>';}const incompleteSetups=trades.filter(t=>{if(!t.setup)return false;let c=0;if(t.setup.liquidityGrab)c++;if(t.setup.firstImpulse)c++;if(t.setup.secondImpulse)c++;if(t.setup.pullback)c++;if(t.setup.killzoneLow)c++;if(t.setup.setupComplete)c++;return c<6;}).length;if(incompleteSetups>trades.length*0.3){tipsHtml+='<div class="tip-item"><div class="tip-icon">üìã</div><div class="tip-text"><strong>Setup-Qualit√§t verbessern:</strong> '+incompleteSetups+' von '+trades.length+' Trades hatten unvollst√§ndige Setups. Disziplin bei der Checkliste!</div></div>';}document.getElementById('optimization-tips-content').innerHTML=tipsHtml||'<div class="tip-item"><div class="tip-icon">üéâ</div><div class="tip-text">Du bist auf einem guten Weg! Weiter so!</div></div>';}
function renderHistory(){const el=document.getElementById('trade-list');if(trades.length===0){el.innerHTML='<div class="empty-state"><h3>Noch keine Trades</h3><p>Beginne mit deinem ersten Trade!</p></div>';return;}let html='';trades.slice().reverse().forEach((t,idx)=>{const pips=t.tp-t.sl;const dollar=(pips*t.lot).toFixed(2);const realIndex=trades.length-1-idx;const risk=Math.abs(t.entry-t.sl);const reward=Math.abs(t.tp-t.entry);const rr=risk>0?(reward/risk).toFixed(1):0;html+='<div class="trade-card '+(pips>=0?'profit':'loss')+'"><div class="trade-header"><div><div class="trade-date">'+(t.session||'')+' | '+(t.weekday||'')+' | '+new Date(t.date).toLocaleDateString('de-DE',{year:'numeric',month:'long',day:'numeric'})+'</div><div class="trade-result '+(pips>=0?'profit':'loss')+'">'+(pips>=0?'+':'')+pips+' Pips</div></div><button class="delete-btn" onclick="deleteTrade('+realIndex+')">√ó</button></div><div class="trade-details"><div class="detail-item"><label>Entry</label><div class="detail-value">'+t.entry+'</div></div><div class="detail-item"><label>SL</label><div class="detail-value">'+t.sl+'</div></div><div class="detail-item"><label>TP</label><div class="detail-value">'+t.tp+'</div></div><div class="detail-item"><label>Lot</label><div class="detail-value">'+t.lot+'</div></div><div class="detail-item"><label>Fibo</label><div class="detail-value">'+t.fibo+'</div></div><div class="detail-item"><label>R:R</label><div class="detail-value">1:'+rr+'</div></div><div class="detail-item"><label>USD</label><div class="detail-value">$'+dollar+'</div></div></div>';if(t.notes)html+='<div style="padding:12px;background:rgba(245,158,11,0.1);border-radius:8px;margin:15px 0;font-size:14px;border-left:3px solid var(--warning)"><strong>üìù Notizen:</strong><br>'+t.notes+'</div>';html+='<div class="trade-tags">';if(t.setup.liquidityGrab)html+='<span class="tag">‚úì Liquidity Grab</span>';if(t.setup.firstImpulse)html+='<span class="tag">‚úì 1st Impulse</span>';if(t.setup.secondImpulse)html+='<span class="tag">‚úì 2nd Impulse</span>';if(t.setup.pullback)html+='<span class="tag">‚úì Pullback</span>';if(t.setup&&t.setup.killzoneLow)html+='<span class="tag killzone">‚úì Killzone Low</span>';if(t.setup&&t.setup.killzoneHigh)html+='<span class="tag killzone">‚úì Killzone High</span>';if(t.setup&&t.setup.setupComplete)html+='<span class="tag">‚úì Setup Complete</span>';if(t.patterns&&Array.isArray(t.patterns)&&t.patterns.length>0){t.patterns.forEach(p=>html+='<span class="tag pattern">üé® '+p+'</span>');}if(t.errors&&Array.isArray(t.errors)&&t.errors.length>0){t.errors.forEach(e=>html+='<span class="tag error">‚ö†Ô∏è '+e+'</span>');}html+='</div></div>';});el.innerHTML=html;}
function calcLive(){const entry=parseFloat(document.getElementById('trade-entry').value)||0;const sl=parseFloat(document.getElementById('trade-sl').value)||0;const tp=parseFloat(document.getElementById('trade-tp').value)||0;const lot=parseFloat(document.getElementById('trade-lot').value)||0;const risk=Math.abs(entry-sl);const reward=Math.abs(tp-entry);let rr=risk>0?(reward/risk):0;let rrText='0:0';if(rr>0){const rrRounded=Math.round(rr*10)/10;rrText=rrRounded%1===0?'1:'+rrRounded.toFixed(0):'1:'+rrRounded.toFixed(1);}const dollar=(tp-sl)*lot;document.getElementById('calc-risk').textContent=risk.toFixed(1);document.getElementById('calc-reward').textContent=reward.toFixed(1);document.getElementById('calc-rr').textContent=rrText;document.getElementById('calc-rr').className='calc-value '+(rr>=2?'good':'bad');document.getElementById('calc-dollar').textContent='$'+dollar.toFixed(2);}
function checkKillzoneToday(){const today=new Date().toISOString().split('T')[0];const todayTrades=trades.filter(t=>t.date===today);const hasKillzoneToday=todayTrades.some(t=>t.setup&&(t.setup.killzoneLow||t.setup.killzoneHigh));const infoBox=document.getElementById('killzone-info');if(hasKillzoneToday){infoBox.classList.remove('hidden');const killzoneCount=todayTrades.filter(t=>t.setup&&(t.setup.killzoneLow||t.setup.killzoneHigh)).length;const probability=Math.min(15+killzoneCount*5,35);document.getElementById('killzone-probability').textContent='+'+probability+'%';}else{infoBox.classList.add('hidden');}}
function toggleCheck(id){const cb=document.getElementById('check-'+id);const item=cb.parentElement;cb.checked=!cb.checked;if(cb.checked){item.classList.add('checked');item.querySelector('.check-status').textContent='‚úì OK';}else{item.classList.remove('checked');item.querySelector('.check-status').textContent='Warten';}checkKillzoneToday();}
function saveTrade(){const date=document.getElementById('trade-date').value;const entry=parseFloat(document.getElementById('trade-entry').value);const sl=parseFloat(document.getElementById('trade-sl').value);const tp=parseFloat(document.getElementById('trade-tp').value);const lot=parseFloat(document.getElementById('trade-lot').value);const notes=document.getElementById('trade-notes').value;const fibo=parseFloat(document.getElementById('trade-fibo').value);const session=document.getElementById('trade-session').value;const weekday=document.getElementById('trade-weekday').value;if(!date||!entry||!sl||!tp||!lot){alert('Bitte alle Pflichtfelder ausf√ºllen!');return;}const setup={liquidityGrab:document.getElementById('check-liquidityGrab').checked,firstImpulse:document.getElementById('check-firstImpulse').checked,secondImpulse:document.getElementById('check-secondImpulse').checked,pullback:document.getElementById('check-pullback').checked,killzoneLow:document.getElementById('check-killzoneLow').checked,killzoneHigh:document.getElementById('check-killzoneHigh').checked,setupComplete:document.getElementById('check-setupComplete').checked};const patterns=Array.from(document.querySelectorAll('.multi-select-item.pattern.selected')).map(el=>el.textContent.trim());const errors=Array.from(document.querySelectorAll('.multi-select-item.error.selected')).map(el=>el.textContent.trim());trades.push({date,entry,sl,tp,lot,notes,fibo,session,weekday,patterns,errors,setup});save();resetForm();checkKillzoneToday();alert('Trade gespeichert!');}
function resetForm(){document.getElementById('trade-date').value=new Date().toISOString().split('T')[0];updateWeekday();document.getElementById('trade-entry').value='';document.getElementById('trade-sl').value='';document.getElementById('trade-tp').value='';document.getElementById('trade-lot').value='';document.getElementById('trade-notes').value='';document.querySelectorAll('.check-item').forEach(item=>{item.classList.remove('checked');item.querySelector('input').checked=false;item.querySelector('.check-status').textContent='Warten';});document.querySelectorAll('.multi-select-item').forEach(item=>item.classList.remove('selected'));calcLive();}
function deleteTrade(idx){if(confirm('Trade l√∂schen?')){trades.splice(idx,1);save();renderView();}}
function scrollToEntry(){changeView('entry');window.scrollTo({top:0,behavior:'smooth'});}
function exportData(){const data='data:text/json;charset=utf-8,'+encodeURIComponent(JSON.stringify(trades));const a=document.createElement('a');a.setAttribute('href',data);a.setAttribute('download','us100_trades.json');a.click();}
function importData(e){const file=e.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=function(ev){trades=JSON.parse(ev.target.result);save();renderView();alert('Trades importiert!');};reader.readAsText(file);}
document.getElementById('trade-date').value=new Date().toISOString().split('T')[0];
loadTrades();
</script>
</body>
</html>
